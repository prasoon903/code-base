-- TO BE RUN ON PRIMARY SERVER ONLY

USE CCGS_CoreIssue
GO

BEGIN TRANSACTION
COMMIT TRANSACTION
--ROLLBACK TRANSACTION


UPDATE TOP(1) CCard_Primary SET PostingRef = 'Transaction posted successfully', ArTxnType = '91' WHERE TranID = 38113141390
-- 1 row

UPDATE TOP(1) LogArTxnAddl SET ExcludeFlag = 1 WHERE TranID = 38113141390 AND ArTxnType = '93'
-- 1 row



UPDATE TOP(1) LogArTxnAddl SET ExcludeFlag = 1 WHERE TranID = 38110123203 AND ArTxnType = '93'
-- 1 row

UPDATE TOP(1) LogArTxnAddl SET ExcludeFlag = 1 WHERE TranID = 37465267897 AND ArTxnType = '93'
-- 1 row



/*
VALIDATION

SELECT ExcludeFlag, * FROM LogArTxnAddl WITH (NOLOCK) WHERE TranID = 38113141390 AND ArTxnType = '93'

SELECT PostingRef,ArTxnType,* FROM CCard_Primary WITH (NOLOCK) WHERE TranID = 38113141390


SELECT ExcludeFlag, * FROM LogArTxnAddl WITH (NOLOCK) WHERE TranID IN (38085437816, 38110123203) AND ArTxnType = '93'


SELECT PostingRef,ArTxnType,* FROM CCard_Primary WITH (NOLOCK) WHERE TranID IN (38085437816, 38110123203)

SELECT PostingRef,ArTxnType,* FROM CCard_Primary WITH (NOLOCK) WHERE TranRef IN (38085437816, 38110123203)


SELECT ExcludeFlag, * FROM LogArTxnAddl WITH (NOLOCK) WHERE TranID IN (37461253079, 37465267897) AND ArTxnType = '93'


SELECT PostingRef,ArTxnType,* FROM CCard_Primary WITH (NOLOCK) WHERE TranID IN (37461253079, 37465267897)

SELECT PostingRef,ArTxnType,* FROM CCard_Primary WITH (NOLOCK) WHERE TranRef IN (37461253079, 37465267897)

38085437816, 38110123203

37461253079, 37465267897

*/